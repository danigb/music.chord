(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var gamut=require("music.gamut");var harmonizer=require("music.harmonizer");var operator=require("music.pitch.operator");function chord(source,tonic){if(arguments.length===1)return function(t){return chord(source,t)};return gamut.apply(function(g){var intervals=harmonizer(g,false).sort(operator.compare);return harmonizer(intervals,tonic)},source)}if(typeof module==="object"&&module.exports)module.exports=chord;if(typeof window!=="undefined")window.chord=chord},{"music.gamut":2,"music.harmonizer":6,"music.pitch.operator":10}],2:[function(require,module,exports){"use strict";var notation=require("music.notation");var isArray=Array.isArray;var identity=function(e){return e};function _curry(fn){return function(a,b){return arguments.length===1?function(b){return fn(a,b)}:fn(a,b)}}var SEP=/\s*\|\s*|\s*,\s*|\s+/;function gamut(source,fn){return gamut.apply(fn||identity,source)}gamut.apply=_curry(function(fn,source){var isGamut=isArray(source)&&isArray(source[0]);var g=isGamut?source:gamut.split(source).map(notation.arr);var res=fn(g);return!isGamut&&isArray(res[0])?res.map(notation.str):res});gamut.map=_curry(function(fn,source){return gamut.apply(function(g){return g.map(fn)},source)});gamut.filter=_curry(function(fn,source){return gamut.apply(function(g){return g.filter(fn)},source)});gamut.split=function(source){if(isArray(source))return source;else if(typeof source==="string")return source.trim().split(SEP);else if(source===null||typeof source==="undefined")return[];else return[source]};module.exports=gamut},{"music.notation":3}],3:[function(require,module,exports){"use strict";var note=require("music.note.parser");var interval=require("music.interval.parser");var notation=function(){return notation};notation.arr=function(src){if(!src||Array.isArray(src))return src;return note(src)||interval(src)};var cache={};notation.str=function(arr){if(!Array.isArray(arr))return null;var str="|"+arr[0]+"|"+arr[1]+"|"+arr[2]+"|"+arr[3]+"|"+arr[4];return str in cache?cache[str]:cache[str]=note.build(arr)||interval.build(arr)};notation.op=function(fn){return function(pitch){if(!pitch)return null;if(Array.isArray(pitch))return fn(pitch);var a=notation.arr(pitch);if(!a)return null;var v=fn(a);return Array.isArray(v)?notation.str(v):v}};module.exports=notation},{"music.interval.parser":4,"music.note.parser":5}],4:[function(require,module,exports){"use strict";var INTERVAL=/^([-+]?)(\d+)(d{1,4}|m|M|P|A{1,4}|b{1,4}|#{1,4}|)$/;var QALT={P:{dddd:-4,ddd:-3,dd:-2,d:-1,P:0,A:1,AA:2,AAA:3,AAAA:4},M:{ddd:-4,dd:-3,d:-2,m:-1,M:0,A:1,AA:2,AAA:3,AAAA:4}};var ALTER={P:["dddd","ddd","dd","d","P","A","AA","AAA","AAAA"],M:["ddd","dd","d","m","M","A","AA","AAA","AAAA"]};var TYPES="PMMPPMM";var cache={};function interval(str){return str in cache?cache[str]:cache[str]=interval.parse(str)}interval.parse=function(str){var m=INTERVAL.exec(str);if(!m)return null;var dir=m[1]==="-"?-1:1;var num=+m[2]-1;var simple=num%7;var oct=dir*Math.floor(num/7);var type=TYPES[simple];var alt;if(m[3]==="")alt=0;else if(m[3][0]==="#")alt=m[3].length;else if(m[3][0]==="b")alt=-m[3].length;else{alt=QALT[type][m[3]];if(typeof alt==="undefined")return null}if(dir===-1){alt=type==="P"?-alt:-(alt+1);if(simple!==0){simple=7-simple;oct--}}return[simple,alt,oct]};interval.build=function(i){if(!i||i.length!==3)return null;var t=TYPES[Math.abs(i[0])%7];var n=number(i);var alt=i[1];if(n<0)alt=t==="P"?-alt:-(alt+1);var q=ALTER[t][4+alt];return n+q};function number(i){var simple=i[0]%7+1;if(!i[2])return simple;var dir=i[2]<0?-1:1;var oct=Math.abs(i[2]);if(dir<0){simple=9-simple;oct--}return dir*(simple+7*oct)}module.exports=interval},{}],5:[function(require,module,exports){"use strict";function fillStr(num,char){return Array(num+1).join(char)}var LETTERS="CDEFGAB";var REGEX=/^([a-gA-G])(#{1,4}|b{1,4}|x{1,2}|)(\d*)$/;var cache={};function note(str){return str in cache?cache[str]:cache[str]=note.parse(str)}note.parse=function(str){var m=REGEX.exec(str);if(!m)return null;var step=LETTERS.indexOf(m[1].toUpperCase());var alt=m[2].replace(/x/g,"##").length;if(m[2][0]==="b")alt*=-1;return m[3]?[step,alt,+m[3],0]:[step,alt]};note.build=function(arr){if(!arr||arr.length<2||arr.length===3)return null;var letter=LETTERS.charAt(Math.abs(arr[0])%7);var acc=fillStr(Math.abs(arr[1]),arr[1]<0?"b":"#");var oct=arr[2]||arr[2]===0?arr[2]:"";return letter+acc+oct};if(typeof module==="object"&&module.exports)module.exports=note;if(typeof window!=="undefined")window.note=note},{}],6:[function(require,module,exports){"use strict";var gamut=require("music.gamut");var operator=require("music.pitch.operator");var notation=require("music.notation");function harmonizer(intervals,tonic){if(arguments.length===1)return function(t){return harmonizer(intervals,t)};return gamut.apply(function(g){var intervals=toIntervals(g);if(tonic===false)return intervals;var t=notation.arr(tonic);return intervals.map(operator.addTo(t))},intervals)}function toIntervals(notes){var t=operator.setDefaultOctave(0,notes[0]);return notes.map(function(n){return n&&n.length!==3?operator.subtract(t,n):n})}module.exports=harmonizer},{"music.gamut":2,"music.notation":7,"music.pitch.operator":10}],7:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3,"music.interval.parser":8,"music.note.parser":9}],8:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{dup:4}],9:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{dup:5}],10:[function(require,module,exports){"use strict";var op={};op.pitchClass=function(p){return p?[p[0],p[1]]:null};op.setOctave=function(num,arr){if(arguments.length===1)return function(arr){return op.setOctave(num,arr)};if(!arr)return null;var copy=arr.slice();copy[2]=num;return copy};op.simplify=op.setOctave(0);op.setDefaultOctave=function(oct,arr){if(arguments.length===1)return function(arr){return op.setDefaultOctave(oct,arr)};if(!arr)return null;var c=arr.slice();c[2]=c[2]===null||c[2]===undefined?oct:c[2];return c};var SEMITONES=[0,2,4,5,7,9,11];op.height=function(i){return i?SEMITONES[i[0]%7]+i[1]+12*(i[2]||0):null};op.compare=function(a,b){return op.height(a)-op.height(b)};var BASE_TO=[[0,0],[2,-1],[4,-2],[-1,1],[1,0],[3,-1],[5,-2]];var BASE_FROM=[[0,0],[4,0],[1,1],[5,1],[2,2],[6,2],[3,-1]];op.toFifths=function(t){var base=BASE_TO[t[0]%7];var fifths=base[0]+7*t[1];var oct=t.length>2?base[1]+t[2]-4*t[1]:null;return[fifths,oct]};op.fromFifths=function(coord){var q=coord[0]%7;var index=q<0?7-Math.abs(q):q;var alter=Math.floor((coord[0]+1)/7);var base=BASE_FROM[index];var oct=coord[1]===null?null:base[1]+alter*4+coord[1];return[base[0],alter,oct]};function add(a,b){var fifths=a[0]+b[0];var octaves=a[1]===null||b[1]===null?null:a[1]+b[1];return[fifths,octaves]}op.add=function(a,b){if(arguments.length===1)return function(b){return op.add(a,b)};if(!a||!b)return null;var r=op.fromFifths(add(op.toFifths(a),op.toFifths(b)));var copy=b.slice();copy[0]=r[0];copy[1]=r[1];if(b.length>2)copy[2]=r[2];return copy};op.addTo=function(p){return function(i){return op.add(i,p)}};function subtract(a,b){var fifths=b[0]-a[0];var octaves=a[1]!==null&&b[1]!==null?b[1]-a[1]:null;return[fifths,octaves]}op.subtract=function(a,b){if(arguments.length===1)return function(b){return op.subtract(a,b)};if(!a||!b)return null;return op.fromFifths(subtract(op.toFifths(a),op.toFifths(b)))};function multiply(m,a){return[m*a[0],a[1]===null?null:m*a[1]]}op.multiply=function(m,a){if(arguments.length===1)return function(b){return op.multiply(m,b)};if(!a)return null;return op.fromFifths(multiply(+m,op.toFifths(a)))};module.exports=op},{}]},{},[1]);